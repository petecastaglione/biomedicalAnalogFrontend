* C:\Users\maurovlachus\OneDrive - Technical University of Cluj-Napoca\utcn\master\caa\proiect\p1_opamps\AO_CP_NMOS\test_ao_cp_n_AC.asc
V2 $G_VDD 0 1.65
V3 $G_VSS 0 -1.65
V1 vmc 0 0
R1 out_ac N001 10Meg
C1 N001 vmc 1m
I1 N003 0 25µ
V4 N002 vmc AC 1
C2 out_ac vmc 5p
XX2 N001 N002 out_ac N003 ao_cp_n
R2 out_ac2 N004 10Meg
C3 N004 vmc 1m
I2 N006 0 10µ
V5 N005 vmc AC 1
C4 out_ac2 vmc 5p
XX1 N004 N005 out_ac2 N006 nmosfoldedcascode_ekvmodellingedited

* block symbol definitions
.subckt ao_cp_n IM IP Out Iref
M1 N002 IP N006 $G_vss N_130n l={L} w=134u ad={Ldif*134u} as={Ldif*134u} pd={(Ldif+134u)*2} ps={(Ldif+134u)*2} m=1
M8 N005 Iref N002 $G_vdd P_130n l={L} w=41u ad={Ldif*41u} as={Ldif*41u} pd={(Ldif+41u)*2} ps={(Ldif+41u)*2} m=1
M2 N003 IM N006 $G_vss N_130n l={L} w=134u ad={Ldif*134u} as={Ldif*134u} pd={(Ldif+134u)*2} ps={(Ldif+134u)*2} m=1
M3 N006 N007 $G_vss $G_vss N_130n l=3u w=19u ad={Ldif*19u} as={Ldif*19u} pd={(Ldif+19u)*2} ps={(Ldif+19u)*2} m=5
M4 N008 N008 $G_vss $G_vss N_130n l={L} w=14u ad={Ldif*14u} as={Ldif*14u} pd={(Ldif+14u)*2} ps={(Ldif+14u)*2} m=1
M5 N009 N008 $G_vss $G_vss N_130n l={L} w=14u ad={Ldif*14u} as={Ldif*14u} pd={(Ldif+14u)*2} ps={(Ldif+14u)*2} m=1
M6 N005 N005 N008 $G_vss N_130n l={L} w=14u ad={Ldif*14u} as={Ldif*14u} pd={(Ldif+14u)*2} ps={(Ldif+14u)*2} m=1
M7 Out N005 N009 $G_vss N_130n l={L} w=14u ad={Ldif*14u} as={Ldif*14u} pd={(Ldif+14u)*2} ps={(Ldif+14u)*2} m=1
M9 Out Iref N003 $G_vdd P_130n l={L} w=41u ad={Ldif*41u} as={Ldif*41u} pd={(Ldif+41u)*2} ps={(Ldif+41u)*2} m=1
M10 N002 N001 $G_vdd $G_vdd P_130n l={L} w=68u ad={Ldif*68u} as={Ldif*68u} pd={(Ldif+68u)*2} ps={(Ldif+68u)*2} m=1
M11 N003 N001 $G_vdd $G_vdd P_130n l={L} w=68u ad={Ldif*68u} as={Ldif*68u} pd={(Ldif+68u)*2} ps={(Ldif+68u)*2} m=1
M12 N004 N001 $G_vdd $G_vdd P_130n l=1u w=13u ad={Ldif*13u} as={Ldif*13u} pd={(Ldif+13u)*2} ps={(Ldif+13u)*2} m=1
M13 N001 N001 $G_vdd $G_vdd P_130n l=1u w=13u ad={Ldif*13u} as={Ldif*13u} pd={(Ldif+13u)*2} ps={(Ldif+13u)*2} m=1
M14 N007 Iref N004 $G_vdd P_130n l=1u w=10u ad={Ldif*10u} as={Ldif*10u} pd={(Ldif+10u)*2} ps={(Ldif+10u)*2} m=1
M15 Iref Iref N001 $G_vdd P_130n l=1u w=10u ad={Ldif*10u} as={Ldif*10u} pd={(Ldif+10u)*2} ps={(Ldif+10u)*2} m=1
M16 N007 N007 $G_vss $G_vss N_130n l=3u w=19u ad={Ldif*19u} as={Ldif*19u} pd={(Ldif+19u)*2} ps={(Ldif+19u)*2} m=1
.param L=1u W=1u Ldif=0.2u
.ends ao_cp_n

.subckt nmosfoldedcascode_ekvmodellingedited IM IP Out Iref
M1 N002 IP N006 $G_vss n_130n l=130.0n w=28.149u ad=5.63p as=5.63p pd=56.698u ps=56.698u m=1
M8 N005 vcascp N002 $G_vdd p_130n l=130.0n w=2.401u ad=480.151f as=480.151f pd=5.202u ps=5.202u m=1
M2 N003 IM N006 $G_vss n_130n l=130.0n w=28.149u ad=5.63p as=5.63p pd=56.698u ps=56.698u m=1
M3 N006 N007 $G_vss $G_vss n_130n l=3.0u w=51.967u ad=10.393p as=10.393p pd=104.335u ps=104.335u m=1
M4 N008 N008 $G_vss $G_vss n_130n l=1.0u w=20.787u ad=4.157p as=4.157p pd=41.974u ps=41.974u m=1
M5 N009 N008 $G_vss $G_vss n_130n l=1.0u w=20.787u ad=4.157p as=4.157p pd=41.974u ps=41.974u m=1
M6 N005 N005 N008 $G_vss n_130n l=130.0n w=3.153u ad=630.538f as=630.538f pd=6.705u ps=6.705u m=1
M7 Out N005 N009 $G_vss n_130n l=130.0n w=3.153u ad=630.538f as=630.538f pd=6.705u ps=6.705u m=1
M9 Out vcascp N003 $G_vdd p_130n l=130.0n w=2.401u ad=480.151f as=480.151f pd=5.202u ps=5.202u m=1
M10 N002 vbiasp $G_vdd $G_vdd p_130n l=1.0u w=395.729u ad=79.146p as=79.146p pd=791.858u ps=791.858u m=1
M11 N003 vbiasp $G_vdd $G_vdd p_130n l=1.0u w=395.729u ad=79.146p as=79.146p pd=791.858u ps=791.858u m=1
M12 N004 N001 $G_vdd $G_vdd p_130n l=3.0u w=6.631u ad=1.326p as=1.326p pd=13.663u ps=13.663u m=1
M13 N001 N001 $G_vdd $G_vdd p_130n l=3.0u w=6.631u ad=1.326p as=1.326p pd=13.663u ps=13.663u m=1
M14 N007 Iref N004 $G_vdd p_130n l=3.0u w=6.631u ad=1.326p as=1.326p pd=13.663u ps=13.663u m=1
M15 Iref Iref N001 $G_vdd p_130n l=3.0u w=6.631u ad=1.326p as=1.326p pd=13.663u ps=13.663u m=1
M16 N007 N007 $G_vss $G_vss n_130n l=3.0u w=4.354u ad=870.827f as=870.827f pd=9.108u ps=9.108u m=1
M17 vcascp N007 $G_vss $G_vss n_130n l=3.0u w=870.827n ad=174.165f as=174.165f pd=2.142u ps=2.142u m=1
M19 vbiasp vbiasp $G_vdd $G_vdd p_130n l=1.0u w=5.526u ad=1.105p as=1.105p pd=11.452u ps=11.452u m=1
M18 vcascp vcascp vbiasp $G_vdd p_130n l=500.0n w=4.0u ad=800.0f as=800.0f pd=8.4u ps=8.4u m=1
.model n_130n nmos
+ mobmod = 1
+ capmod = 2
+ nqsmod = 0
+ vth0 = 0.332
+ nch = 5.6000000e+17
+ nlx = 3.5500000e-07
+ k1 = 0.3661500
+ k2 = 0.00
+ k3 = 0.00
+ k3b = 0.00
+ w0 = 0.00
+ dvt0w = 0.00
+ dvt1w = 0.00
+ dvt2w = 0.00
+ dvt0 = 8.7500000
+ dvt1 = 0.7000000
+ dvt2 = 5.0000000e-02
+ eta0 = 4.0000000e-02
+ etab = 0.00
+ dsub = 0.5200000
+ ua = -1.8000000e-09
+ ub = 2.2000000e-18
+ uc = -2.9999999e-11
+ a0 = 2.1199999
+ ags = -0.1000000
+ b0 = 0.00
+ b1 = 0.00
+ keta = 4.0000000e-02
+ voff = -7.9800000e-02
+ vsat = 1.3500000e+05
+ a1 = 0.00
+ a2 = 0.9900000
+ rdsw = 200
+ prwg = 0.00
+ prwb = 0.00
+ wr = 1.0000000
+ nfactor = 1.1000000
+ cit = 0.00
+ cdsc = 0.00
+ cdscd = 0.00
+ cdscb = 0.00
+ pclm = 0.1000000
+ pdiblc1 = 1.2000000e-02
+ pdiblc2 = 7.5000000e-03
+ pdiblcb = -1.3500000e-02
+ drout = 0.2800000
+ pscbe1 = 8.6600000e+08
+ pscbe2 = 1.0000000e-20
+ pvag = -0.2800000
+ alpha0 = 0.00
+ beta0 = 30.0000000
+ ckappa = 0.8912
+ cf = 1.113e-10
+ clc = 5.475e-08
+ cle = 6.46
+ cgsl = 1.1155e-10
+ cgdl = 1.1155e-10
+ wint = { (0.00-(0/2)) }
+ wln = 0.00
+ ww = 0.00
+ wl = 0.00
+ wwn = 1.0000000
+ wwl = 0.00
+ dwg = 0.00
+ dwb = 0.00
+ lint = { (2.5e-08-(0/2)) }
+ ll = 0.00
+ lln = 1.0000000
+ lw = 0.00
+ lwn = 0.00
+ lwl = 0.00
+ dlc = 2e-08
+ dwc = 0
+ kt1 = -0.3400000
+ kt1l = 4.0000000e-09
+ kt2 = -5.2700000e-02
+ ute = -1.2300000
+ ua1 = -8.6300000e-10
+ ub1 = 2.0000001e-18
+ uc1 = 0.00
+ at = 0.00
+ prt = 0.00
+ xti = 3.0
+ lmin = 1.3e-7
+ lmax = 1.3e-7
+ wmin = 1.3e-7
+ wmax = 1.0e-4
+ binunit = 2
+ elm = 5
+ xpart = 1
+ level = 7
+ js = 2.50e-08
+ jsw = 4.00e-13
+ n = 1.0
+ cj = 0.0015
+ cjsw = 2e-10
+ mj = 0.7175511
+ mjsw = 0.3706993
+ pb = 1.24859
+ pbsw = 0.7731149
+ rd = 0
+ rs = 0
+ xj = 4.5000000e-08
+ ngate = 5.0000000e+20
+ tox = 3.3e-09
+ cgbo = 0.0e+00
+ cgdo = 2.75e-10
+ cgso = 2.75e-10
+ delta = 1.0100000e-02
+ u0 = 1.3400000e-02
.model p_130n pmos
+ mobmod = 1
+ capmod = 2
+ nqsmod = 0
+ vth0 = -0.3499
+ nch = 6.8500000e+18
+ nlx = 1.6500000e-07
+ k1 = 0.4087000
+ k2 = 0.00
+ k3 = 0.00
+ k3b = 0.00
+ w0 = 0.00
+ dvt0w = 0.00
+ dvt1w = 0.00
+ dvt2w = 0.00
+ dvt0 = 5.0000000
+ dvt1 = 0.2600000
+ dvt2 = -1.0000000e-02
+ eta0 = 80.0000000
+ etab = 0.00
+ dsub = 1.8500000
+ ua = -1.4000000e-09
+ ub = 1.9499999e-18
+ uc = -2.9999999e-11
+ a0 = 2.1199999
+ ags = 0.1000000
+ b0 = 0.00
+ b1 = 0.00
+ keta = 3.0300001e-02
+ voff = -9.10000000e-02
+ vsat = 1.0500000e+05
+ a1 = 0.00
+ a2 = 0.4000000
+ rdsw = 400
+ prwg = 0.00
+ prwb = 0.00
+ wr = 1.0000000
+ nfactor = 0.1250000
+ cit = 2.7999999e-03
+ cdsc = 0.00
+ cdscd = 0.00
+ cdscb = 0.00
+ pclm = 2.5000000
+ pdiblc1 = 4.8000000e-02
+ pdiblc2 = 5.0000000e-05
+ pdiblcb = 0.1432509
+ drout = 9.0000000e-02
+ pscbe1 = 1.0000000e-20
+ pscbe2 = 1.0000000e-20
+ pvag = -6.0000000e-02
+ alpha0 = 0.00
+ beta0 = 30.0000000
+ ckappa = 0.8912
+ cf = 1.113e-10
+ clc = 5.475e-08
+ cle = 6.46
+ cgsl = 1.1155e-10
+ cgdl = 1.1155e-10
+ wint = { (0.00-(0/2)) }
+ wln = 0.00
+ ww = 0.00
+ wl = 0.00
+ wwn = 0.00
+ wwl = 0.00
+ dwg = 0.00
+ dwb = 0.00
+ lint = { (2.e-08-(0/2)) }
+ ll = 0.00
+ lln = 0.00
+ lw = 0.00
+ lwn = 0.00
+ lwl = 0.00
+ dlc = 2e-08
+ dwc = 0
+ kt1 = -0.3400000
+ kt1l = 4.0000000e-09
+ kt2 = -5.2700000e-02
+ ute = -1.2300000
+ ua1 = -8.6300000e-10
+ ub1 = 2.0000001e-18
+ uc1 = 0.00
+ at = 0.00
+ prt = 0.00
+ xti = 3.0
+ lmin = 1.3e-7
+ lmax = 1.3e-7
+ wmin = 1.3e-7
+ wmax = 1.0e-4
+ binunit = 2
+ elm = 5
+ xpart = 1
+ level = 7
+ js = 2.50e-08
+ jsw = 4.00e-13
+ n = 1.0
+ cj = 0.0015
+ cjsw = 2e-10
+ mj = 0.7175511
+ mjsw = 0.3706993
+ pb = 1.24859
+ pbsw = 0.7731149
+ rd = 0
+ rs = 0
+ xj = 4.5000000e-08
+ ngate = 5.0000000e+20
+ tox = 3.3e-09
+ cgbo = 0.0e+00
+ cgdo = 2.75e-10
+ cgso = 2.75e-10
+ delta = 1.0100000e-02
+ u0 = 5.2000000e-03
.ends nmosfoldedcascode_ekvmodellingedited

.model NMOS NMOS
.model PMOS PMOS
.lib C:\Users\maurovlachus\AppData\Local\LTspice\lib\cmp\standard.mos
.lib proiect_CAA.txt
.ac dec 100 1 1G
* .op
.backanno
.end
